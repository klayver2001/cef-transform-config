<% // backend/src/templates/cisco-com_switch-tipo2.ejs %>
!
! OWNER OI -- CISCO COM SWITCH
! VRRP_<%= codigoUl %>_LinkOI
!
hostname <%= codigoUl %>_RT02
!
aaa new-model
!
aaa group server tacacs+ fac-ctc
server name fac-ctc
ip tacacs source-interface Loopback10
!
aaa group server tacacs+ fac-dtc
server name fac-dtc
ip tacacs source-interface Loopback10
!
aaa authentication login default group fac-ctc group fac-dtc local
aaa authentication ppp default local
aaa authorization config-commands
aaa authorization exec default group fac-ctc group fac-dtc local
!
clock timezone BRZ -3 0
!
no ip domain lookup
ip cef
no ipv6 cef
!
multilink bundle-name authenticated
!
username sysop privilege 15 password 0 PDOc8N93!XNtREFx$
!
interface Loopback1
description Loopback Gerencia Caixa
ip address <%= ipLoopbackPrim %> 255.255.255.255
!
interface Loopback10
description Loopback Gerencia Caixa
ip address <%= ipLoopback10 %> 255.255.255.255
!
interface Embedded-Service-Engine0/0
no ip address
shutdown
!
interface GigabitEthernet0/0
description REDE LAN UL - Terminais
ip address <%= ipRedeVlan3 %> 255.255.255.240
ip address <%= ipSwitchRouter %> 255.255.255.248 secondary
vrrp 1 ip <%= ipRedeVlan1 %>
vrrp 2 ip <%= ipSwitchVip %>
ip helper-address 172.31.248.215
ip helper-address 172.31.252.215
duplex auto
speed auto
no shut
!
interface GigabitEthernet0/1
description Conectado ao device Elsys LTE
ip address 192.168.10.100 255.255.255.0
duplex auto
speed auto
no shut
!
ip route 0.0.0.0 0.0.0.0 192.168.10.254
ip route 10.98.0.80 255.255.255.255 192.168.10.254
ip route 10.98.0.81 255.255.255.255 192.168.10.254
ip route 10.98.0.82 255.255.255.255 192.168.10.254
ip route 10.98.0.83 255.255.255.255 192.168.10.254
ip route 10.98.0.84 255.255.255.255 192.168.10.254
!
interface Tunnel0
bandwidth 512
ip address <%= ipDmvpn %> 255.248.0.0
no ip redirects
ip nhrp map multicast <%= concentradorDmvpn %>
ip nhrp map <%= nhrpMap %>
ip nhrp network-id 1
ip nhrp holdtime 90
ip nhrp nhs <%= ipDmvpn %>
delay 1000
tunnel source GigabitEthernet0/1
tunnel mode gre multipoint
!
ip prefix-list OUT_TO_BB seq 10 permit <%= ipLoopback10 %>/32
ip prefix-list OUT_TO_BB seq 20 permit <%= ipRedeVlan %>/28
ip prefix-list OUT_TO_BB seq 30 permit <%= ipRedeSwitch %>/29
!
route-map OUT_TO_BB permit 10
match ip address prefix-list OUT_TO_BB
!
router bgp 64765
bgp router-id <%= ipLoopback10 %>
bgp log-neighbor-changes
timers bgp 10 30
neighbor <%= ipDmvpn %> remote-as 65055
!
address-family ipv4
  network <%= ipLoopback10 %> mask 255.255.255.255
  network <%= ipRedeVlan %> mask 255.255.255.240
  network <%= ipRedeSwitch %> mask 255.255.255.248
  neighbor <%= ipDmvpn %> activate
  neighbor <%= ipDmvpn %> soft-reconfiguration inbound
  neighbor <%= ipDmvpn %> route-map OUT_TO_BB out
exit-address-family
!
ip sla 1
icmp-echo 10.98.0.1 source-interface Loopback1
frequency 5
ip sla schedule 1 life forever start-time now
!
access-list 50 permit 172.31.249.0 0.0.0.255
access-list 50 permit 172.31.253.0 0.0.0.255
access-list 50 permit 200.218.181.0 0.0.0.255
access-list 50 deny any log
!
snmp-server group GRP_LOTERICOS v3 auth access 50
snmp-server view lotericos iso included
snmp-server user lotericos GRP_LOTERICOS v3 auth sha Consorcio12# priv des lotericos 
snmp-server source-interface trap loopback 10
snmp-server usm cisco
snmp-server manager
snmp-server source-interface informs l10
!
logging trap notifications
logging origin-id hostname
!
logging source-interface Loopback10
logging host 172.31.249.36 transport udp port 5518
logging host 172.31.253.36 transport udp port 5518
!
tacacs server fac-ctc
address ipv4 172.31.248.45
key Consorcio123@
tacacs server fac-dtc
address ipv4 172.31.252.45
key Consorcio123@
!
control-plane
!
banner motd #
RTCS**********************************************************************************
* *
* #########################                              *
* #########################                              *
* ####                                                   *
* ####                                                   *
* ####                                                   *
* ####                              *
* ####                              *
* ####                              *
* #########################                              *
* #########################                              *
* *
* Alerta                                          *
* *
* O acesso a este sistema e limitado a usuarios autorizados.               *
* Todas as informacoes e comunicacoes sobre este sistema sao monitoradas e gravadas. *
* O Acesso sem autorizado esta sujeito as medidas legais.                 *
* *
**************************************************************************************
#
ip tftp source-interface Loopback10
ip domain-name sencinet.com
crypto key generate rsa
1024
!
line con 0
line aux 0
line vty 0 4
transport input ssh
!
scheduler allocate 20000 1000
ntp source Loopback10
ntp server 172.31.248.66 prefer
ntp server 172.31.252.66
ntp server 172.31.248.215
ntp server 172.31.252.215
!
end
```ejs
<% // backend/src/templates/cisco-sem_switch-tipo2.ejs %>
!
! OWNER OI -- CISCO SEM SWITCH
! BGP_<%= codigoUl %>_LinkOI
!
hostname <%= codigoUl %>_RT02
!
aaa new-model
!
aaa group server tacacs+ fac-ctc
server name fac-ctc
ip tacacs source-interface Loopback10
!
aaa group server tacacs+ fac-dtc
server name fac-dtc
ip tacacs source-interface Loopback10
!
aaa authentication login default group fac-ctc group fac-dtc local
aaa authentication ppp default local
aaa authorization config-commands
aaa authorization exec default group fac-ctc group fac-dtc local
!
clock timezone BRZ -3 0
!
no ip domain lookup
ip cef
no ipv6 cef
!
multilink bundle-name authenticated
!
username sysop privilege 15 password 0 PDOc8N93!XNtREFx$
username sysop_oi privilege 15 password 0 @C0ns0rc10
!
interface Loopback10
description Loopback Gerencia Caixa
ip address <%= ipLoopback10 %> 255.255.255.255
!
interface GigabitEthernet0/0
description Conectado ao Roteador OI
ip address 192.168.248.254 255.255.255.252
duplex auto
speed auto
no shut
!
interface GigabitEthernet0/1
description Conectado ao device Elsys LTE
ip address 192.168.10.100 255.255.255.0
duplex auto
speed auto
no shut
!
ip route 0.0.0.0 0.0.0.0 192.168.10.254
ip route 10.98.0.80 255.255.255.255 192.168.10.254
ip route 10.98.0.81 255.255.255.255 192.168.10.254
ip route 10.98.0.82 255.255.255.255 192.168.10.254
ip route 10.98.0.83 255.255.255.255 192.168.10.254
ip route 10.98.0.84 255.255.255.255 192.168.10.254
!
interface Tunnel0
bandwidth 512
ip address <%= ipDmvpn %> 255.248.0.0
no ip redirects
ip nhrp map multicast <%= concentradorDmvpn %>
ip nhrp map <%= nhrpMap %>
ip nhrp network-id 1
ip nhrp holdtime 90
ip nhrp nhs <%= ipDmvpn %>
delay 1000
tunnel source GigabitEthernet0/1
tunnel mode gre multipoint
!
ip prefix-list OUT_TO_BB seq 10 permit <%= ipLoopback10 %>/32
ip prefix-list OUT_TO_BB seq 20 permit <%= ipRedeVlan %>/28
ip prefix-list OUT_TO_BB seq 30 permit <%= ipRedeSwitch %>/29
!
route-map OUT_TO_BB permit 10
match ip address prefix-list OUT_TO_BB
!
ip prefix-list STATIC_TO_BGP seq 10 permit 172.16.0.0/16 le 32
ip prefix-list STATIC_TO_BGP seq 20 permit 172.17.0.0/16 le 32
ip prefix-list STATIC_TO_BGP seq 30 permit 172.18.0.0/16 le 32
ip prefix-list STATIC_TO_BGP seq 40 permit 172.24.0.0/16 le 32
ip prefix-list STATIC_TO_BGP seq 50 permit 172.27.0.0/16 le 32
ip prefix-list STATIC_TO_BGP seq 60 permit 172.31.0.0/16 le 32
!
route-map STATIC_TO_BGP permit 10
match ip address prefix-list STATIC_TO_BGP
!
router bgp 64765
bgp router-id <%= ipLoopback10 %>
bgp log-neighbor-changes
timers bgp 10 30
neighbor <%= ipDmvpn %> remote-as 65055
neighbor 192.168.248.253 remote-as 65002
!
address-family ipv4
  network <%= ipLoopback10 %> mask 255.255.255.255
  network <%= ipRedeVlan %> mask 255.255.255.240
  network <%= ipRedeSwitch %> mask 255.255.255.248
  neighbor <%= ipDmvpn %> activate
  neighbor <%= ipDmvpn %> soft-reconfiguration inbound
  neighbor <%= ipDmvpn %> route-map OUT_TO_BB out
  neighbor 192.168.248.253 activate
  neighbor 192.168.248.253 soft-reconfiguration inbound
  neighbor 192.168.248.253 route-map STATIC_TO_BGP out
exit-address-family
!
ip sla 1
icmp-echo 10.98.0.1 source-interface Loopback10
frequency 5
ip sla schedule 1 life forever start-time now
!
access-list 50 permit 172.31.249.0 0.0.0.255
access-list 50 permit 172.31.253.0 0.0.0.255
access-list 50 permit 200.218.181.0 0.0.0.255
access-list 50 deny any log
!
snmp-server group GRP_LOTERICOS v2c write lotericos 
snmp-server group GRP_LOTERICOS v3 auth write lotericos
snmp-server group GRP_LOTERICOS v3 priv write lotericos
snmp-server user lotericos GRP_LOTERICOS v3 auth sha Consorcio12# priv des lotericos
snmp-server view lotericos iso included
snmp-server community lotericos RW 50
snmp-server trap-source Loopback10
snmp-server source-interface informs Loopback10
snmp-server usm cisco
snmp-server manager
!
logging trap notifications
logging origin-id hostname
logging source-interface Loopback10
logging host 172.31.249.36 transport udp port 5518
logging host 172.31.253.36 transport udp port 5518
!
tacacs server fac-ctc
address ipv4 172.31.248.45
key Consorcio123@
tacacs server fac-dtc
address ipv4 172.31.252.45
key Consorcio123@
!
control-plane
!
banner login ^C
RTCS**********************************************************************************
* *
* #########################                              *
* #########################                              *
* ####                                                   *
* ####                                                   *
* ####                                                   *
* ####                              *
* ####                              *
* ####                              *
* #########################                              *
* #########################                              *
* *
* Alerta                                          *
* *
* O acesso a este sistema e limitado a usuarios autorizados.               *
* Todas as informacoes e comunicacoes sobre este sistema sao monitoradas e gravadas. *
* O Acesso sem autorizado esta sujeito as medidas legais.                 *
* *
**************************************************************************************
^C
!
ip domain-name sencinet.com
crypto key generate rsa
1024
!
line con 0
line aux 0
line vty 0 4
transport input all
!
scheduler allocate 20000 1000
ntp source Loopback10
ntp server 172.31.248.66 prefer
ntp server 172.31.252.66
ntp server 172.31.248.215
ntp server 172.31.252.215
ip tftp source-interface Loopback10
end
```ejs
<% // backend/src/templates/hp-com_switch-tipo2.ejs %>
;
; OWNER OI -- HP COM SWITCH
; VRRP_<%= codigoUl %>_LinkOI
;
sysname <%= codigoUl %>_RT02
#
clock timezone BRZ minus 03:00:00
undo clock summer-time
#
dhcp relay server-group 0 ip 172.31.248.215
dhcp relay server-group 0 ip 172.31.252.215
dhcp relay server-detect
#
ipsec sa global-duration time-based 900
ipsec anti-replay window 256
ipsec invalid-spi-recovery enable
#
domain default enable system
#
telnet server enable
#
port-security enable
#
multicast routing-enable
#
password-recovery enable
#
acl number 2950
rule 0 permit source 172.31.249.0 0.0.0.255
rule 5 permit source 172.31.253.0 0.0.0.255
rule 8 permit source 200.218.181.0 0.0.0.255
rule 10 deny logging
#
acl number 3002
rule 10 permit ip source <%= ipRedeVlan %> 0.0.0.15
rule 20 permit ip source <%= ipLoopback10 %> 0
rule 30 permit ip source <%= ipRedeSwitch %> 0.0.0.7
#
ike proposal 1
encryption-algorithm 3des-cbc
dh group2
#
ike dpd vpn-dpd
#
ike peer spoke
proposal 1
pre-shared-key cipher $c$3$SDsJnPMBuPhJ9t1a7BZXX4MH06iulaVJfe6+DwvDmA==
remote-address <%= concentrador1 %>
dpd vpn-dpd
#
ike peer spoke2
proposal 1
pre-shared-key cipher $c$3$W07mH/6hDaBakdtuzoypF3qaY+MOgUxo/m+yeohSKQ==
remote-address <%= concentrador2 %>
dpd vpn-dpd
#
ipsec transform-set spoke_transform
encapsulation-mode tunnel
transform esp
esp authentication-algorithm sha1
esp encryption-algorithm 3des
#
ipsec policy vpn_ipsec 1 isakmp
security acl 3002
ike-peer spoke primary
ike-peer spoke2
transform-set spoke_transform
sa duration time-based 900
#
local-user sysop
password cipher $c$3$3OMNsa/wUHFsQ49w6rBXdY7CFJtyFOWnuVqcO+l9Hn8JWnB/
authorization-attribute level 3
service-type ssh telnet terminal
local-user sysop_oi
password cipher @C0ns0rc10
authorization-attribute level 1
service-type ssh terminal
#
interface Ethernet0/1
port link-mode route
description connected to Elsys LTe module
ip address 192.168.10.100 255.255.255.0
igmp enable
igmp static-group 230.1.1.2
ipsec policy vpn_ipsec
pim sm
#
interface Ethernet0/2
port link-mode route
description VLAN TFLs
ip address <%= ipRedeVlan3 %> 255.255.255.240
ip address <%= ipSwitchRouter %> 255.255.255.248 sub
vrrp vrid 1 virtual-ip <%= ipRedeVlan1 %>
vrrp vrid 2 virtual-ip <%= ipSwitchVip %>
dhcp select relay
dhcp relay server-select 0
igmp enable
igmp static-group 230.1.1.2
pim sm
#
interface LoopBack10
description gerenciamento CEF circuito LTE (secundario)
ip address <%= ipLoopback10 %> 255.255.255.255
#
igmp
#
pim
auto-rp enable
static-rp 172.17.150.33
#
nqa entry icmp loopback10
type icmp-echo
data-size 32
destination ip 10.98.0.1
frequency 300000
probe count 15
source ip <%= ipLoopback10 %>
#
nqa entry icmp loopback_switch
type icmp-echo
data-size 32
destination ip 10.98.0.1
frequency 300000
probe count 15
source ip <%= ipSwitchRouter %>
#
ip route-static 0.0.0.0 0.0.0.0 192.168.10.254
ip route-static 10.98.0.1 255.255.255.255 192.168.10.254
ip route-static <%= concentrador1 %> 255.255.255.255 192.168.10.254
ip route-static <%= concentrador2 %> 255.255.255.255 192.168.10.254
ip route-static 172.16.0.0 255.255.0.0 192.168.10.254
ip route-static 172.17.0.0 255.255.0.0 192.168.10.254
ip route-static 172.18.0.0 255.255.0.0 192.168.10.254
ip route-static 172.24.0.0 255.255.0.0 192.168.10.254
ip route-static 172.27.0.0 255.255.0.0 192.168.10.254
ip route-static 172.31.0.0 255.255.0.0 192.168.10.254
#
snmp-agent
snmp-agent sys-info contact Sencinet
snmp-agent sys-info version v3
snmp-agent mib-view included mib-lotericos iso
snmp-agent group v3 GRP_LOTERICOS privacy write-view mib-lotericos
snmp-agent group v3 GRP_LOTERICOS write-view VIEW_LOTERICOS acl 2950
snmp-agent usm-user V3 lotericos GRP_LOTERICOS authentication-mode sha Consorcio12# privacy-mode des lotericos acl 2950
#
header login %
RTHP**********************************************************************************
* *
* #########################                              *
* #########################                              *
* ####                                                   *
* ####                                                   *
* ####                                                   *
* ####                              *
* ####                              *
* ####                              *
* #########################                              *
* #########################                              *
* *
* Alerta                                          *
* *
* O acesso a este sistema e limitado a usuarios autorizados.               *
* Todas as informacoes e comunicacoes sobre este sistema sao monitoradas e gravadas. *
* O Acesso sem autorizado esta sujeito as medidas legais.                 *
* *
**************************************************************************************
%
#
tftp client source interface LoopBack10
info-center enable
info-center source default channel 2 trap level informational
info-center loghost source Loopback10
info-center loghost 172.31.249.36 port 20009
info-center loghost 172.31.253.36 port 20009
info-center synchronous
#
dhcp enable
#
nqa schedule icmp loopback10 start-time now lifetime forever
nqa schedule icmp loopback_switch start-time now lifetime forever
#
ntp-service source-interface LoopBack10
ntp-service unicast-peer 172.31.248.66
ntp-service unicast-peer 172.31.252.66
ntp-service unicast-peer 172.31.248.215
ntp-service unicast-peer 172.31.252.215
#
ssh server enable
#
user-interface con 0
user-interface vty 0 4
authentication-mode scheme
idle-timeout 5 30
#
hwtacacs scheme fac-svr-tacacs-template
primary authentication 172.31.248.45 key Consorcio123@
secondary authentication 172.31.252.45 key Consorcio123@
primary authorization 172.31.248.45 key Consorcio123@
secondary authorization 172.31.252.45 key Consorcio123@
primary accounting 172.31.248.45 key Consorcio123@
secondary accounting 172.31.252.45 key Consorcio123@
nas-ip <%= ipLoopback10 %>
user-name-format without-domain
#
aaa nas-id profile system
#
domain system
authentication default hwtacacs-scheme fac-svr-tacacs-template local
authorization default hwtacacs-scheme fac-svr-tacacs-template local
accounting default hwtacacs-scheme fac-svr-tacacs-template local
authorization command hwtacacs-scheme fac-svr-tacacs-template
access-limit disable
state active
idle-cut disable
self-service-url disable
#
user-interface vty 0 4
authentication-mode scheme
protocol inbound all
idle-timeout 5 30
#
quit
#
save f
```ejs
<% // backend/src/templates/hp-sem_switch-tipo2.ejs %>
;
; OWNER OI -- HP SEM SWITCH
; BGP_<%= codigoUl %>_LinkOI
;
sysname <%= codigoUl %>_RT02
#
clock timezone BRZ minus 03:00:00
undo clock summer-time
#
dhcp relay server-group 0 ip 172.31.248.215
dhcp relay server-group 0 ip 172.31.252.215
dhcp relay server-detect
#
ipsec sa global-duration time-based 900
ipsec anti-replay window 256
ipsec invalid-spi-recovery enable
#
domain default enable system
#
telnet server enable
#
port-security enable
#
multicast routing-enable
#
password-recovery enable
#
acl number 2950
rule 0 permit source 172.31.249.0 0.0.0.255
rule 5 permit source 172.31.253.0 0.0.0.255
rule 8 permit source 200.218.181.0 0.0.0.255
rule 10 deny logging
#
acl number 3002
rule 10 permit ip source <%= ipRedeVlan %> 0.0.0.15
rule 20 permit ip source <%= ipLoopback10 %> 0
#
vlan 1
#
ike proposal 1
encryption-algorithm 3des-cbc
dh group2
#
ike dpd vpn-dpd
#
ike peer spoke
proposal 1
pre-shared-key cipher $c$3$SDsJnPMBuPhJ9t1a7BZXX4MH06iulaVJfe6+DwvDmA==
remote-address <%= concentrador1 %>
dpd vpn-dpd
#
ike peer spoke2
proposal 1
pre-shared-key cipher $c$3$W07mH/6hDaBakdtuzoypF3qaY+MOgUxo/m+yeohSKQ==
remote-address <%= concentrador2 %>
dpd vpn-dpd
#
ipsec transform-set spoke_transform
encapsulation-mode tunnel
transform esp
esp authentication-algorithm sha1
esp encryption-algorithm 3des
#
ipsec policy vpn_ipsec 1 isakmp
security acl 3002
ike-peer spoke primary
ike-peer spoke2
transform-set spoke_transform
sa duration time-based 900
#
local-user sysop
password cipher $c$3$3OMNsa/wUHFsQ49w6rBXdY7CFJtyFOWnuVqcO+l9Hn8JWnB/
authorization-attribute level 3
service-type ssh telnet terminal
local-user sysop_oi
password cipher @C0ns0rc10
authorization-attribute level 1
service-type ssh terminal
#
cwmp
undo cwmp enable
#
interface Ethernet0/1
port link-mode route
description connected to Elsys LTe module
ip address 192.168.10.100 255.255.255.0
igmp enable
igmp static-group 230.1.1.2
ipsec policy vpn_ipsec
pim sm
#
interface Ethernet0/2
port link-mode route
description connected to router OI - Gi0/0
ip address 192.168.248.254 255.255.255.252
igmp enable
igmp static-group 230.1.1.2
pim sm
#
interface LoopBack10
description gerenciamento CEF circuito LTE (secundario)
ip address <%= ipLoopback10 %> 255.255.255.255
#
ip ip-prefix PERMITE_ESTATICAS index 10 permit 172.16.0.0 16 less-equal 32
ip ip-prefix PERMITE_ESTATICAS index 20 permit 172.17.0.0 16 less-equal 32
ip ip-prefix PERMITE_ESTATICAS index 30 permit 172.18.0.0 16 less-equal 32
ip ip-prefix PERMITE_ESTATICAS index 40 permit 172.24.0.0 16 less-equal 32
ip ip-prefix PERMITE_ESTATICAS index 50 permit 172.27.0.0 16 less-equal 32
ip ip-prefix PERMITE_ESTATICAS index 60 permit 172.31.0.0 16 less-equal 32
ip ip-prefix PERMITE_ESTATICAS index 70 deny 0.0.0.0 0 less-equal 32
#
route-policy STATIC_TO_BGP permit node 10
if-match ip-prefix PERMITE_ESTATICAS
#
bgp 64765
router-id <%= ipLoopback10 %>
import-route static
undo synchronization
timer keepalive 10 hold 30
peer 192.168.248.253 as-number 65002
peer 192.168.248.253 route-policy STATIC_TO_BGP export
#
igmp
#
pim
auto-rp enable
static-rp 172.17.150.33
#
nqa entry icmp loopback10
type icmp-echo
data-size 32
destination ip 10.98.0.1
frequency 300000
probe count 15
source ip <%= ipLoopback10 %>
#
ip route-static 0.0.0.0 0.0.0.0 192.168.10.254
ip route-static 10.98.0.1 255.255.255.255 192.168.10.254
ip route-static <%= concentrador1 %> 255.255.255.255 192.168.10.254
ip route-static <%= concentrador2 %> 255.255.255.255 192.168.10.254
ip route-static 172.16.0.0 255.255.0.0 192.168.10.254
ip route-static 172.17.0.0 255.255.0.0 192.168.10.254
ip route-static 172.18.0.0 255.255.0.0 192.168.10.254
ip route-static 172.24.0.0 255.255.0.0 192.168.10.254
ip route-static 172.27.0.0 255.255.0.0 192.168.10.254
ip route-static 172.31.0.0 255.255.0.0 192.168.10.254
#
snmp-agent
snmp-agent sys-info contact Sencinet
snmp-agent sys-info version v3
snmp-agent mib-view included mib-lotericos iso
snmp-agent group v3 GRP_LOTERICOS privacy write-view mib-lotericos
snmp-agent group v3 GRP_LOTERICOS write-view VIEW_LOTERICOS acl 2950
snmp-agent usm-user V3 lotericos GRP_LOTERICOS authentication-mode sha Consorcio12# privacy-mode des lotericos acl 2950
#
header login %
RTHP**********************************************************************************
* *
* #########################                              *
* #########################                              *
* ####                                                   *
* ####                                                   *
* ####                                                   *
* ####                              *
* ####                              *
* ####                              *
* #########################                              *
* #########################                              *
* *
* Alerta                                          *
* *
* O acesso a este sistema e limitado a usuarios autorizados.               *
* Todas as informacoes e comunicacoes sobre este sistema sao monitoradas e gravadas. *
* O Acesso sem autorizado esta sujeito as medidas legais.                 *
* *
**************************************************************************************
%
#
tftp client source interface LoopBack10
info-center enable
info-center source default channel 2 trap level informational
info-center loghost source Loopback10
info-center loghost 172.31.249.36 port 20009
info-center loghost 172.31.253.36 port 20009
info-center synchronous
#
dhcp enable
#
nqa schedule icmp loopback10 start-time now lifetime forever
#
ntp-service source-interface LoopBack10
ntp-service unicast-peer 172.31.248.66
ntp-service unicast-peer 172.31.252.66
ntp-service unicast-peer 172.31.248.215
ntp-service unicast-peer 172.31.252.215
#
ssh server enable
#
user-interface aux 0
user-interface tty 13
modem both
user-interface vty 0 4
authentication-mode scheme
idle-timeout 5 30
#
hwtacacs scheme fac-svr-tacacs-template
primary authentication 172.31.248.45 key Consorcio123@
primary authorization 172.31.248.45 key Consorcio123@
primary accounting 172.31.248.45 key Consorcio123@
secondary authentication 172.31.252.45 key Consorcio123@
secondary authorization 172.31.252.45 key Consorcio123@
secondary accounting 172.31.252.45 key Consorcio123@
nas-ip <%= ipLoopback10 %>
user-name-format without-domain
#
aaa nas-id profile system
#
domain system
authentication default hwtacacs-scheme fac-svr-tacacs-template local
authorization default hwtacacs-scheme fac-svr-tacacs-template local
accounting default hwtacacs-scheme fac-svr-tacacs-template local
authorization command hwtacacs-scheme fac-svr-tacacs-template
access-limit disable
state active
idle-cut disable
self-service-url disable
#
user-interface vty 0 4
authentication-mode scheme
protocol inbound ssh
idle-timeout 5 30
#
quit
#
save f
#
```ejs
<%# Este arquivo base será usado para ambas as versões do Huawei com switch %>




<%# Nome do arquivo: huawei-ver-com_switch-tipo2.ejs (apenas como referência) %>
#
# OWNER OI -- HUAWEI <%= versaoHuawei %> COM SWITCH
# VRRP_<%= codigoUl %>_LinkOI
#
clock timezone BRZ minus 03:00:00
#
sysname <%= codigoUl %>_RT02
#
header shell information "
**************************************************************************************
* Alerta                                            *
* *
* O acesso a este sistema eh limitado a usuarios autorizados.                *
* Todas as informacoes e comunicacoes sobre este sistema sao monitoradas e gravadas. *
* *
* O Acesso sem autorizado estah sujeito as medidas legais.                  *
* *
**************************************************************************************
"
header login information "
RTHU**********************************************************************************
* *
* ########################                               *
* ########################                               *
* ####                                                   *
* ####                                                   *
* ####                                                   *
* ####                               *
* ####                               *
* ####                               *
* ########################                               *
* ########################                               *
* *
* Alerta                                        *
* *
* O acesso a este sistema e limitado a usuarios autorizados.               *
* Todas as informacoes e comunicacoes sobre este sistema sao monitoradas e gravadas. *
* O Acesso sem autorizacao esta sujeito as medidas legais.                 *
* *
**************************************************************************************
"
#
drop illegal-mac alarm
#
ipsec authentication sha2 compatible enable
#
multicast routing-enable
#
dhcp enable
#
acl number 2950
rule 0 permit source 172.31.249.0 0.0.0.255
rule 5 permit source 172.31.253.0 0.0.0.255
rule 8 permit source 200.218.181.0 0.0.0.255
rule 10 deny logging
#
domain default_admin
aaa
authentication-scheme fac-svr-tacacs-scheme
accounting-scheme fac-svr-tacacs-scheme
authorization-scheme fac-svr-tacacs-scheme
hwtacacs-server fac-svr-tacacs-template
#
pim
auto-rp listening enable
static-rp 172.17.150.33
#
interface Ethernet0/0/4
undo portswitch
description connected to Elsys LTe module
ip address 192.168.10.100 255.255.255.0
pim sm
igmp enable
igmp static-group 230.1.1.2
trust dscp
#
interface Ethernet0/0/1
port link-type access
#
interface Ethernet0/0/2
undo portswitch
description Switch Eth0/8
ip address <%= ipRedeVlan3 %> 255.255.255.240
ip address <%= ipSwitchRouter %> 255.255.255.248 sub
vrrp vrid 1 virtual-ip <%= ipRedeVlan1 %>
vrrp vrid 2 virtual-ip <%= ipSwitchVip %>
dhcp select relay
dhcp relay server-select group1
igmp enable
igmp static-group 230.1.1.2
trust dscp
#
interface GigabitEthernet0/0/0
shutdown
#
interface LoopBack10
ip address <%= ipLoopback10 %> 255.255.255.255
#
snmp-agent
snmp-agent sys-info contact Sencinet
snmp-agent sys-info version v3
snmp-agent group v3 GRP_LOTERICOS authentication acl 2950
snmp-agent group v3 GRP_LOTERICOS privacy write-view lotericos acl 2950
snmp-agent group v3 GRP_LOTERICOS authentication write-view lotericos acl 2950
snmp-agent usm-user v3 lotericos
snmp-agent group v3 GRP_LOTERICOS privacy write-view mib-lotericos
snmp-agent mib-view included lotericos iso
snmp-agent usm-user v3 lotericos group GRP_LOTERICOS
snmp-agent usm-user v3 lotericos authentication-mode sha
Consorcio12#
Consorcio12#
#
snmp-agent usm-user v3 lotericos privacy-mode des56
12#Consorcio
12#Consorcio
snmp-agent usm-user v3 lotericos acl 2950
#
ssh client first-time enable
sftp server enable
stelnet server enable
telnet server enable
#
ip ip-prefix OUT_TO_BB index 10 permit 99.244.0.0 14 greater-equal 14 less-equal 28
ip ip-prefix OUT_TO_BB index 20 permit <%= ipLoopback10 %> 32
ip ip-prefix OUT_TO_BB index 30 permit <%= ipRedeSwitch %> 29
#
route-policy OUT_TO_BB permit node 10
if-match ip-prefix OUT_TO_BB
#
interface Tunnel0/0/0
ip address <%= ipDmvpn %> 255.248.0.0
tunnel-protocol gre p2mp
nhrp registration no-unique
nhrp entry multicast dynamic
source Ethernet0/0/4
nhrp registration interval 90
nhrp network-id 1
nhrp entry <%= ipDmvpn %> <%= concentradorDmvpn %> register
#
bgp 64765
router-id <%= ipLoopback10 %>
timer keepalive 10 hold 30
peer <%= ipDmvpn %> as-number 65055
#
ipv4-family unicast
undo synchronization
network <%= ipLoopback10 %> 255.255.255.255
network <%= ipRedeVlan %> 255.255.255.240
network <%= ipRedeSwitch %> 255.255.255.248
peer <%= ipDmvpn %> enable
peer <%= ipDmvpn %> route-policy OUT_TO_BB export
#
ip route-static 10.98.0.80 255.255.255.255 192.168.10.254
ip route-static 10.98.0.81 255.255.255.255 192.168.10.254
ip route-static 10.98.0.82 255.255.255.255 192.168.10.254
ip route-static 10.98.0.83 255.255.255.255 192.168.10.254
#
nqa test-instance icmp loopback10
test-type icmp
destination-address ipv4 10.98.0.1
frequency 300
probe-count 15
source-interface LoopBack 10
start now
#
nqa test-instance icmp loopback_switch
test-type icmp
destination-address ipv4 10.98.0.1
source-address ipv4 <%= ipSwitchRouter %>
frequency 300
probe-count 15
start now
#
user-interface con 0
authentication-mode aaa
#
ntp-service source-interface LoopBack10
ntp-service unicast-peer 172.31.248.66 preference
ntp-service unicast-peer 172.31.252.66
ntp-service unicast-peer 172.31.248.215
ntp-service unicast-peer 172.31.252.215
#
info-center enable
info-center source default channel 2 trap level informational
info-center loghost source LoopBack10
info-center loghost 172.31.249.36 transport udp port 20008
info-center loghost 172.31.253.36 transport udp port 20008
info-center timestamp log format-date
tftp client-source -i loopback10
#
set default tftp-directory flash:
tftp server enable
#
<%- verhuawei1 %>
hwtacacs-server source-ip <%= ipLoopback10 %>
#
quit
#
undo aaa
Y
#
aaa
undo local-aaa-user password policy administrator
authentication-scheme fac-tacacs-scheme
authentication-mode hwtacacs local
authorization-scheme fac-tacacs-scheme
authorization-mode hwtacacs local
accounting-scheme fac-tacacs-scheme
accounting interim-fail offline
domain default_admin
authentication-scheme fac-tacacs-scheme
accounting-scheme fac-tacacs-scheme
authorization-scheme fac-tacacs-scheme
hwtacacs-server fac-tacacs-template
<%- verhuawei2 %>
#
user-interface vty 0 4
authentication-mode aaa
protocol in ssh
quit
#
save
Y
```ejs
<%# Este arquivo base será usado para ambas as versões do Huawei sem switch %>
<%# Nome do arquivo: huawei-ver-sem_switch-tipo2.ejs (apenas como referência) %>
#
# OWNER OI -- HUAWEI <%= versaoHuawei %> SEM SWITCH
# BGP_<%= codigoUl %>_LinkOI
#
clock timezone BRZ minus 03:00:00
#
sysname <%= codigoUl %>_RT02
#
header shell information "
**************************************************************************************
* Alerta                                            *
* *
* O acesso a este sistema eh limitado a usuarios autorizados.                *
* Todas as informacoes e comunicacoes sobre este sistema sao monitoradas e gravadas. *
* *
* O Acesso sem autorizado estah sujeito as medidas legais.                  *
* *
**************************************************************************************
"
header login information "
RTHU**********************************************************************************
* *
* ########################                               *
* ########################                               *
* ####                                                   *
* ####                                                   *
* ####                                                   *
* ####                               *
* ####                               *
* ####                               *
* ########################                               *
* ########################                               *
* *
* Alerta                                        *
* *
* O acesso a este sistema e limitado a usuarios autorizados.               *
* Todas as informacoes e comunicacoes sobre este sistema sao monitoradas e gravadas. *
* O Acesso sem autorizado esta sujeito as medidas legais.                 *
* *
**************************************************************************************
"
#
drop illegal-mac alarm
#
ipsec authentication sha2 compatible enable
#
multicast routing-enable
#
dhcp enable
#
acl number 2950
rule 0 permit source 172.31.249.0 0.0.0.255
rule 5 permit source 172.31.253.0 0.0.0.255
rule 8 permit source 200.218.181.0 0.0.0.255
rule 10 deny logging
#
domain default_admin
aaa
authentication-scheme fac-svr-tacacs-scheme
accounting-scheme fac-svr-tacacs-scheme
authorization-scheme fac-svr-tacacs-scheme
hwtacacs-server fac-svr-tacacs-template
#
pim
auto-rp listening enable
static-rp 172.17.150.33
#
interface Ethernet0/0/4
undo portswitch
description connected to Elsys LTe module
ip address 192.168.10.100 255.255.255.0
pim sm
igmp enable
igmp static-group 230.1.1.2
trust dscp
#
interface Ethernet0/0/1
port link-type access
#
interface Ethernet0/0/2
undo portswitch
description connected to router OI - Gi0/0
ip address 192.168.248.254 255.255.255.252
pim sm
igmp enable
igmp static-group 230.1.1.2
trust dscp
#
interface GigabitEthernet0/0/0
shutdown
#
ip ip-prefix PERMITE_ESTATICAS index 10 permit 172.16.0.0 16 less-equal 32
ip ip-prefix PERMITE_ESTATICAS index 20 permit 172.17.0.0 16 less-equal 32
ip ip-prefix PERMITE_ESTATICAS index 30 permit 172.18.0.0 16 less-equal 32
ip ip-prefix PERMITE_ESTATICAS index 40 permit 172.24.0.0 16 less-equal 32
ip ip-prefix PERMITE_ESTATICAS index 50 permit 172.27.0.0 16 less-equal 32
ip ip-prefix PERMITE_ESTATICAS index 60 permit 172.31.0.0 16 less-equal 32
#
ip ip-prefix OUT_TO_BB index 10 permit 99.244.0.0 14 greater-equal 14 less-equal 28
ip ip-prefix OUT_TO_BB index 20 permit <%= ipLoopback10 %> 32
#
route-policy OUT_TO_BB permit node 10
if-match ip-prefix OUT_TO_BB
#
route-policy STATIC_TO_BGP permit node 10
if-match ip-prefix PERMITE_ESTATICAS
#
interface Tunnel0/0/0
ip address <%= ipDmvpn %> 255.248.0.0
tunnel-protocol gre p2mp
nhrp registration no-unique
nhrp entry multicast dynamic
source Ethernet0/0/4
nhrp registration interval 90
nhrp network-id 1
nhrp entry <%= ipDmvpn %> <%= concentradorDmvpn %> register
#
interface LoopBack10
description gerenciamento CEF circuito LTE (secundario)
ip address <%= ipLoopback10 %> 255.255.255.255
#
bgp 64765
router-id <%= ipLoopback10 %>
timer keepalive 10 hold 30
peer 192.168.248.253 as-number 65002
peer <%= ipDmvpn %> as-number 65055
#
ipv4-family unicast
undo synchronization
network <%= ipLoopback10 %> 255.255.255.255
network <%= ipRedeVlan %> 255.255.255.240
peer 192.168.248.253 enable
peer 192.168.248.253 route-policy STATIC_TO_BGP export
peer <%= ipDmvpn %> enable
peer <%= ipDmvpn %> route-policy OUT_TO_BB export
#
snmp-agent
snmp-agent sys-info contact Sencinet
snmp-agent sys-info version v3
snmp-agent group v3 GRP_LOTERICOS authentication acl 2950
snmp-agent group v3 GRP_LOTERICOS privacy write-view lotericos acl 2950
snmp-agent group v3 GRP_LOTERICOS authentication write-view lotericos acl 2950
snmp-agent usm-user v3 lotericos
snmp-agent group v3 GRP_LOTERICOS privacy write-view mib-lotericos
snmp-agent mib-view included lotericos iso
snmp-agent usm-user v3 lotericos group GRP_LOTERICOS
snmp-agent usm-user v3 lotericos authentication-mode sha
Consorcio12#
Consorcio12#
#
snmp-agent usm-user v3 lotericos privacy-mode des56
12#Consorcio
12#Consorcio
snmp-agent usm-user v3 lotericos acl 2950
#
ip route-static 10.98.0.80 255.255.255.255 192.168.10.254
ip route-static 10.98.0.81 255.255.255.255 192.168.10.254
ip route-static 10.98.0.82 255.255.255.255 192.168.10.254
ip route-static 10.98.0.83 255.255.255.255 192.168.10.254
#
nqa test-instance icmp loopback10
test-type icmp
destination-address ipv4 10.98.0.1
frequency 300
probe-count 15
source-interface LoopBack 10
start now
#
user-interface con 0
authentication-mode aaa
#
ntp-service source-interface LoopBack10
ntp-service unicast-peer 172.31.248.66 preference
ntp-service unicast-peer 172.31.252.66
ntp-service unicast-peer 172.31.248.215
ntp-service unicast-peer 172.31.252.215
#
info-center enable
info-center source default channel 2 trap level informational
info-center loghost source LoopBack10
info-center loghost 172.31.249.36 transport udp port 20008
info-center loghost 172.31.253.36 transport udp port 20008
info-center timestamp log format-date
tftp client-source -i loopback10
#
<%- verhuawei1 %>
hwtacacs-server source-ip <%= ipLoopback10 %>
#
quit
#
undo aaa
Y
#
aaa
undo local-aaa-user password policy administrator
authentication-scheme fac-tacacs-scheme
authentication-mode hwtacacs local
authorization-scheme fac-tacacs-scheme
authorization-mode hwtacacs local
accounting-scheme fac-tacacs-scheme
accounting interim-fail offline
domain default_admin
authentication-scheme fac-tacacs-scheme
accounting-scheme fac-tacacs-scheme
authorization-scheme fac-tacacs-scheme
hwtacacs-server fac-tacacs-template
<%- verhuawei2 %>
#
user-interface vty 0 4
authentication-mode aaa
protocol in ssh
quit
#
save
Y
